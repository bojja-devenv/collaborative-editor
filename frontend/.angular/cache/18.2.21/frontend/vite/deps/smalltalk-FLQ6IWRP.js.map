{
  "version": 3,
  "sources": ["../../../../../../node_modules/@codemirror/legacy-modes/mode/smalltalk.js"],
  "sourcesContent": ["var specialChars = /[+\\-\\/\\\\*~<>=@%|&?!.,:;^]/;\nvar keywords = /true|false|nil|self|super|thisContext/;\nvar Context = function (tokenizer, parent) {\n  this.next = tokenizer;\n  this.parent = parent;\n};\nvar Token = function (name, context, eos) {\n  this.name = name;\n  this.context = context;\n  this.eos = eos;\n};\nvar State = function () {\n  this.context = new Context(next, null);\n  this.expectVariable = true;\n  this.indentation = 0;\n  this.userIndentationDelta = 0;\n};\nState.prototype.userIndent = function (indentation, indentUnit) {\n  this.userIndentationDelta = indentation > 0 ? indentation / indentUnit - this.indentation : 0;\n};\nvar next = function (stream, context, state) {\n  var token = new Token(null, context, false);\n  var aChar = stream.next();\n  if (aChar === '\"') {\n    token = nextComment(stream, new Context(nextComment, context));\n  } else if (aChar === '\\'') {\n    token = nextString(stream, new Context(nextString, context));\n  } else if (aChar === '#') {\n    if (stream.peek() === '\\'') {\n      stream.next();\n      token = nextSymbol(stream, new Context(nextSymbol, context));\n    } else {\n      if (stream.eatWhile(/[^\\s.{}\\[\\]()]/)) token.name = 'string.special';else token.name = 'meta';\n    }\n  } else if (aChar === '$') {\n    if (stream.next() === '<') {\n      stream.eatWhile(/[^\\s>]/);\n      stream.next();\n    }\n    token.name = 'string.special';\n  } else if (aChar === '|' && state.expectVariable) {\n    token.context = new Context(nextTemporaries, context);\n  } else if (/[\\[\\]{}()]/.test(aChar)) {\n    token.name = 'bracket';\n    token.eos = /[\\[{(]/.test(aChar);\n    if (aChar === '[') {\n      state.indentation++;\n    } else if (aChar === ']') {\n      state.indentation = Math.max(0, state.indentation - 1);\n    }\n  } else if (specialChars.test(aChar)) {\n    stream.eatWhile(specialChars);\n    token.name = 'operator';\n    token.eos = aChar !== ';'; // ; cascaded message expression\n  } else if (/\\d/.test(aChar)) {\n    stream.eatWhile(/[\\w\\d]/);\n    token.name = 'number';\n  } else if (/[\\w_]/.test(aChar)) {\n    stream.eatWhile(/[\\w\\d_]/);\n    token.name = state.expectVariable ? keywords.test(stream.current()) ? 'keyword' : 'variable' : null;\n  } else {\n    token.eos = state.expectVariable;\n  }\n  return token;\n};\nvar nextComment = function (stream, context) {\n  stream.eatWhile(/[^\"]/);\n  return new Token('comment', stream.eat('\"') ? context.parent : context, true);\n};\nvar nextString = function (stream, context) {\n  stream.eatWhile(/[^']/);\n  return new Token('string', stream.eat('\\'') ? context.parent : context, false);\n};\nvar nextSymbol = function (stream, context) {\n  stream.eatWhile(/[^']/);\n  return new Token('string.special', stream.eat('\\'') ? context.parent : context, false);\n};\nvar nextTemporaries = function (stream, context) {\n  var token = new Token(null, context, false);\n  var aChar = stream.next();\n  if (aChar === '|') {\n    token.context = context.parent;\n    token.eos = true;\n  } else {\n    stream.eatWhile(/[^|]/);\n    token.name = 'variable';\n  }\n  return token;\n};\nexport const smalltalk = {\n  name: \"smalltalk\",\n  startState: function () {\n    return new State();\n  },\n  token: function (stream, state) {\n    state.userIndent(stream.indentation(), stream.indentUnit);\n    if (stream.eatSpace()) {\n      return null;\n    }\n    var token = state.context.next(stream, state.context, state);\n    state.context = token.context;\n    state.expectVariable = token.eos;\n    return token.name;\n  },\n  blankLine: function (state, indentUnit) {\n    state.userIndent(0, indentUnit);\n  },\n  indent: function (state, textAfter, cx) {\n    var i = state.context.next === next && textAfter && textAfter.charAt(0) === ']' ? -1 : state.userIndentationDelta;\n    return (state.indentation + i) * cx.unit;\n  },\n  languageData: {\n    indentOnInput: /^\\s*\\]$/\n  }\n};"],
  "mappings": "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",
  "names": []
}
